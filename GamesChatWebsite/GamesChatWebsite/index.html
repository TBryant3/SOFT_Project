<!DOCTYPE html>
<html>
<head>
    <title>Game Reviews and Chat</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script> <!--Socket.io -->
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
</head>

<body>
    <h1>T-Pose Reviews</h1>
  
</body>
</html>











<!--CHAT FEATURE SCRIPT-->
<script>
    $(function ()
    {
        //connects to socket
        var socket = io.connect();  
        //ref to the div message form
        var $messageForm = $("#messageForm"); 
        //ref to input box with id message
        var $messageInput = $("#messageInput"); 
        //ref to div chat
        var $chat = $("#chat"); 

        var test = $messageInput.val("");
        var $people = $("#people");

        $messageForm.submit(function (e)
        {
            e.preventDefault();
            socket.emit("send a message", $messageInput.val());
            $messageInput.val("");
        });

        socket.on("new message", function (data)
        {
            if (data.msg.length > 0)
            {
               $chat.append('<br>' + '<div id="circle"> ' + '<textarea id="t" readonly>' + data.msg + '</textarea>' + ' </div>' + '<br>');
            }
        });
        //Detectng a new user in the chat
        socket.on("new user", function (data)
        {
            $people.append('<br>' + '<div id="circle1"> ' + ' </div>' + '<br>');
        });
        //Detecting user leaving chat
        socket.on("user left", function (data)
        {
            $("#circle1").remove();
        });
    });
    //Log of user messages
    showlog = false;
    window.setInterval(function ()
    {
        if (showlog == false)
        {
            var chat = document.getElementById("chat");
            chat.scrollTop = chat.scrollHeight;

            var people = document.getElementById("people");
            people.scrollTop = people.scrollHeight;
        }
    }, 4);

    function showl()
    {
        showlog = true;
    }

    function hidel()
    {
        var chat = document.getElementById("chat");
        chat.scrollTop = chat.scrollHeight;
        showlog = false;

        var people = document.getElementById("people");
        people.scrollTop = people.scrollHeight;
        showlog = false;
    }

</script>

 
